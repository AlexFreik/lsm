<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>YAD: YouTube Auto Delay</title>
        <script src="./script.js" defer></script>
        <link rel="stylesheet" href="./styles.css" />
        <link rel="icon" type="image/png" href="./isha-logo.png" />
    </head>
    <body>
        <header>
            <h1>YAD: YouTube Auto Delay</h1>
        </header>

        <div id="explanation">
            <p>
                This website allows you to
                <strong>configure the delay for a YouTube Live Stream</strong>.
                The YouTube player will always keep the delay fixed. <br />

                If the current delay becomes bad: shorter than the perfect by
                over
                <strong>1min</strong> or longer than the configured by over
                <strong>1h</strong>, it will automatically be reset back.<br /><br />

                <strong>Example:</strong> So if configured delay is 900s (15min)
                and the current delay is 13min 59s, it will be reset back to
                15min. And if the current delay is 1h 15min 1s, it will be also
                reset back to 15min.<br /><br />

                To account for possible network issues that may increase the
                delay, script will save the current delay and if skipping
                happens (which means delay becomes less then 60s) script will
                return player to the saved delay, and also increase delay by
                5s.<br />

                But if delay becomes bad, but more than 1min (which means it
                wasn't YT skipping but someone manually changed the timeline)
                script will go to the configured delay (not saved one).<br /><br />

                <strong>Example:</strong> If the configured delay is 15min, and
                due to network issues the delay now is 16min. Now YT skips and
                delay becomes 0s. In this case script will reset delay back to
                16min 5s. After this user manually try to set delay to 2h. Then
                the script will completely reset it to 15min.
            </p>
        </div>

        <section>
            <label for="videoId">Video ID:</label>
            <input
                type="text"
                id="videoId"
                placeholder="Enter Video ID"
                value="jfKfPfyJRdk" />

            <label for="delay">Perfect Delay (in seconds):</label>
            <input
                type="number"
                id="delay"
                placeholder="Enter Delay"
                value="900" />

            <button onclick="configurePlayer()">Update</button>
        </section>

        <div class="iframe-container">
            <iframe
                id="player"
                width="560"
                height="315"
                src="https://www.youtube-nocookie.com/embed/jfKfPfyJRdk?autoplay=1&enablejsapi=1&iv_load_policy=3"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
        </div>
    </body>
</html>
